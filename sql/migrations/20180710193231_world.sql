DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20180710193231');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20180710193231');
-- Add your query below.


-- Sturdy Junkbox should contain 2 Silver 35 Copper on average.
-- https://web.archive.org/web/20071013103143/http://thottbot.com:80/i16884
UPDATE `item_template` SET `minMoneyLoot`=225, `maxMoneyLoot`=245 WHERE `entry`=16884;

-- Recipes dropped from Sturdy Junkbox.
DELETE FROM `reference_loot_template` WHERE `entry`=1010;
INSERT INTO `reference_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES
(1010, 3395, 0, 1, 1, 1, 0, 0, 10),
(1010, 4300, 0, 1, 1, 1, 0, 0, 10),
(1010, 7975, 0, 1, 1, 1, 0, 0, 10),
(1010, 7990, 0, 1, 1, 1, 0, 0, 10),
(1010, 7992, 0, 1, 1, 1, 0, 0, 10),
(1010, 7993, 0, 1, 1, 1, 0, 0, 10),
(1010, 8029, 0, 1, 1, 1, 0, 0, 10),
(1010, 8385, 0, 1, 1, 1, 0, 0, 10),
(1010, 8387, 0, 1, 1, 1, 0, 0, 10),
(1010, 8389, 0, 1, 1, 1, 0, 0, 10),
(1010, 9293, 0, 1, 1, 1, 0, 0, 10),
(1010, 9295, 0, 1, 1, 1, 0, 0, 10),
(1010, 10300, 0, 1, 1, 1, 0, 0, 10),
(1010, 10302, 0, 1, 1, 1, 0, 0, 10),
(1010, 10312, 0, 1, 1, 1, 0, 0, 10),
(1010, 10315, 0, 1, 1, 1, 0, 0, 10),
(1010, 10320, 0, 1, 1, 1, 0, 0, 10),
(1010, 10603, 0, 1, 1, 1, 0, 0, 10),
(1010, 10604, 0, 1, 1, 1, 0, 0, 10),
(1010, 10606, 0, 1, 1, 1, 0, 0, 10),
(1010, 11202, 0, 1, 1, 1, 0, 0, 10),
(1010, 11204, 0, 1, 1, 1, 0, 0, 10),
(1010, 11208, 0, 1, 1, 1, 0, 0, 10),
(1010, 11225, 0, 1, 1, 1, 0, 0, 10);

-- Greens dropped from Sturdy Junkbox.
DELETE FROM `reference_loot_template` WHERE `entry`=1011;
INSERT INTO `reference_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES
(1011, 3208, 0, 1, 1, 1, 0, 0, 10),
(1011, 5216, 0, 1, 1, 1, 0, 0, 10),
(1011, 7552, 0, 1, 1, 1, 0, 0, 10),
(1011, 7553, 0, 1, 1, 1, 0, 0, 10),
(1011, 8124, 0, 1, 1, 1, 0, 0, 10),
(1011, 9915, 0, 1, 1, 1, 0, 0, 10),
(1011, 9919, 0, 1, 1, 1, 0, 0, 10),
(1011, 9926, 0, 1, 1, 1, 0, 0, 10),
(1011, 10188, 0, 1, 1, 1, 0, 0, 10),
(1011, 10780, 0, 1, 1, 1, 0, 0, 10),
(1011, 10782, 0, 1, 1, 1, 0, 0, 10),
(1011, 11973, 0, 1, 1, 1, 0, 0, 10),
(1011, 11974, 0, 1, 1, 1, 0, 0, 10),
(1011, 11975, 0, 1, 1, 1, 0, 0, 10),
(1011, 11987, 0, 1, 1, 1, 0, 0, 10),
(1011, 11988, 0, 1, 1, 1, 0, 0, 10),
(1011, 11998, 0, 1, 1, 1, 0, 0, 10),
(1011, 11999, 0, 1, 1, 1, 0, 0, 10),
(1011, 12001, 0, 1, 1, 1, 0, 0, 10),
(1011, 12012, 0, 1, 1, 1, 0, 0, 10),
(1011, 12022, 0, 1, 1, 1, 0, 0, 10),
(1011, 12023, 0, 1, 1, 1, 0, 0, 10),
(1011, 12024, 0, 1, 1, 1, 0, 0, 10),
(1011, 12031, 0, 1, 1, 1, 0, 0, 10),
(1011, 12032, 0, 1, 1, 1, 0, 0, 10),
(1011, 12042, 0, 1, 1, 1, 0, 0, 10),
(1011, 15270, 0, 1, 1, 1, 0, 0, 10),
(1011, 9832, 0, 1, 1, 1, 0, 0, 10),
(1011, 9881, 0, 1, 1, 1, 0, 0, 10),
(1011, 10090, 0, 1, 1, 1, 0, 0, 10),
(1011, 12013, 0, 1, 1, 1, 0, 0, 10);

-- Loot for Sturdy Junkbox.
-- https://web.archive.org/web/20061027003634/http://www.thottbot.com:80/?i=11074
DELETE FROM `item_loot_template` WHERE `entry`=16884;
INSERT INTO `item_loot_template` (`entry`, `item`, `ChanceOrQuestChance`, `groupid`, `mincountOrRef`, `maxcount`, `condition_id`, `patch_min`, `patch_max`) VALUES
(16884, 1010, 1.2, 0, -1010, 1, 0, 0, 10),
(16884, 1011, 1.55, 0, -1011, 1, 0, 0, 10),
(16884, 785, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 1645, 0.5, 0, 1, 1, 0, 0, 10),
(16884, 1710, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 2164, 1, 0, 1, 1, 0, 0, 10),
(16884, 2928, 19.7, 0, 2, 5, 0, 0, 10),
(16884, 2930, 19.7, 0, 2, 5, 0, 0, 10),
(16884, 3356, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 3357, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 3419, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 3818, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 3829, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 3864, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 3927, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 3928, 10, 0, 1, 1, 0, 0, 10),
(16884, 4305, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 4425, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 4601, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 4602, 0.4, 0, 1, 1, 0, 0, 10),
(16884, 4623, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 4625, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 5140, 10.6, 0, 1, 5, 0, 0, 10),
(16884, 5173, 17.9, 0, 2, 7, 0, 0, 10),
(16884, 5428, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 5432, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 5498, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 5500, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 5530, 22.8, 0, 1, 6, 0, 0, 10),
(16884, 6149, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 7909, 1.5, 0, 1, 1, 0, 0, 10),
(16884, 7910, 1.1, 0, 1, 1, 0, 0, 10),
(16884, 7971, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 7974, 1.3, 0, 1, 1, 0, 0, 10),
(16884, 8766, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 8846, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 8923, 21.3, 0, 2, 8, 0, 0, 10),
(16884, 8924, 19.2, 0, 2, 5, 0, 0, 10),
(16884, 8932, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 8839, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 9036, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 9179, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 9206, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 9264, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 9355, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 9356, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 9357, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 9358, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 10592, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 11040, 0.2, 0, 1, 1, 0, 0, 10),
(16884, 13446, 0.05, 0, 1, 1, 0, 0, 10),
(16884, 16884, 0.1, 0, 1, 1, 0, 0, 10),
(16884, 24231, 12, 2, 2, 3, 0, 10, 10),
(16884, 24232, 3, 2, 2, 2, 0, 10, 10),
(16884, 24281, 2.5, 2, 1, 1, 0, 10, 10),
(16884, 24282, 1, 2, 1, 1, 0, 9, 10),
(16884, 24283, 0.01, 0, 1, 1, 0, 9, 10);


-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
